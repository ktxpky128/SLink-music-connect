<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SLink — 行動 Demo</title>
  <link rel="icon" href="logo.png" />
  <link rel="stylesheet" href="style.css" />
  <script src="script.js" defer></script>
</head>
<body>
  <div id="app" class="app-shell">
    <!-- top bar (logo left, title) -->
    <header class="topbar">
      <img id="logoImg" src="logo.png" alt="SLink logo" class="logo" onerror="this.style.display='none'">
      <div class="title-wrap">
        <div class="app-title">SLink</div>
        <div class="app-sub">以音樂共鳴做自然相遇</div>
      </div>
    </header>

    <!-- Views (SPA sections) -->
    <main class="main">
      <!-- HOME: phone-app style: only bottom nav visible initially + main CTA in center -->
      <section id="view-home" class="view active">
        <div class="home-center">
          <div class="big-card">
            <div class="big-icon">🎧</div>
            <h2>開啟定位並偵測正在聽歌的人</h2>
            <p class="muted">開啟後，SLink 會在你選的距離內偵測到「同曲或同風格」的用戶並發出提示音</p>

            <div class="controls">
              <label class="switch">
                <input id="locToggle" type="checkbox">
                <span class="slider"></span>
              </label>
              <div class="control-info">
                <select id="rangeSelect">
                  <option value="near">近距離（50–150m）</option>
                  <option value="mid" selected>中距離（150–500m）</option>
                  <option value="far">遠距離（>500m）</option>
                </select>
              </div>
            </div>

            <button id="detectBtn" class="btn primary large">開 始 偵 測</button>
            <button id="stopBtn" class="btn outline large" style="display:none">停止偵測</button>

            <div id="detectLog" class="log"></div>
          </div>
        </div>
      </section>

      <!-- ROOMS: list of rooms -->
      <section id="view-rooms" class="view">
        <div class="section-head"><h2>共聽室</h2><p class="muted">選擇房間，點入開始聊天</p></div>
        <div class="rooms-grid" id="roomsGrid"></div>
      </section>

      <!-- ROOM CHAT -->
      <section id="view-room" class="view">
        <div class="section-head">
          <button class="back-btn" id="roomBack">← 回房間列表</button>
          <h2 id="roomTitle">房間</h2>
        </div>
        <div class="chatroom">
          <div id="chatWindow" class="chat-window"></div>
          <div class="chat-input">
            <input id="chatInput" placeholder="輸入訊息...（Enter送出）" />
            <button id="chatSend" class="btn">送出</button>
          </div>
        </div>
      </section>

      <!-- PROFILE -->
      <section id="view-profile" class="view">
        <div class="section-head"><h2>我的</h2></div>
        <div class="profile-card">
          <img id="avatarPreview" class="avatar" src="https://img.icons8.com/ios-filled/100/000000/user.png" alt="avatar">
          <input id="avatarInput" type="file" accept="image/*">
          <label>暱稱<input id="nickname" placeholder="@你的暱稱"></label>
          <label>興趣標籤（逗號分隔）<input id="tags" placeholder="kpop, indie, asmr"></label>
          <div class="profile-actions">
            <button id="saveProfile" class="btn primary">儲存</button>
            <button id="resetProfile" class="btn outline">重設</button>
          </div>
          <div id="tagPreview" class="tag-preview"></div>
        </div>
      </section>

      <!-- SETTINGS -->
      <section id="view-settings" class="view">
        <div class="section-head"><h2>設定</h2></div>
        <div class="settings-card">
          <label><input id="chimeToggle" type="checkbox" checked> 提示音（可關閉）</label>
          <label>顯示距離分級（替代精準定位）</label>
          <ul class="dist-list">
            <li>近距離：50–150m</li>
            <li>中距離：150–500m</li>
            <li>遠距離：>500m</li>
          </ul>
          <p class="muted small">隱私：SLink 不顯示精確座標。示範用 local 儲存，不會傳到伺服器。</p>
        </div>
      </section>
    </main>

    <!-- bottom navigation (app-like) -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-target="home">
        <div class="icon">🏠</div><div class="label">主頁</div>
      </button>
      <button class="nav-btn" data-target="rooms">
        <div class="icon">🎶</div><div class="label">共聽室</div>
      </button>
      <button class="nav-btn" data-target="profile">
        <div class="icon">👤</div><div class="label">我的</div>
      </button>
      <button class="nav-btn" data-target="settings">
        <div class="icon">⚙️</div><div class="label">設定</div>
      </button>
    </nav>
  </div>
</body>
</html>
